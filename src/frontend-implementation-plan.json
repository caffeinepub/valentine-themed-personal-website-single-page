{
  "kind": "implementation_plan",
  "version": "1.0",
  "title": "Version 9 publish: production slug validation gate (frontend)",
  "requirements": [
    {
      "id": "REQ-20",
      "summary": "Validate the production domain/slug (5–50 chars; letters/numbers/hyphens) and block the Version 9 publish action with a clear English error when missing/invalid.",
      "acceptanceCriteria": [
        "If a production slug is invalid (wrong length or contains characters other than letters/numbers/hyphens), publishing does not proceed.",
        "The user sees an English error message stating: the slug must be 5–50 characters and contain only letters, numbers, and hyphens.",
        "If a valid slug is provided, the publish flow can proceed (no slug-validation-related blockage)."
      ],
      "file_operations": [
        {
          "path": "frontend/src/utils/validateProductionSlug.ts",
          "operation": "create",
          "description": "Add a small reusable validator (length 5–50; only letters/numbers/hyphens) that returns validity + a user-facing English error string for invalid/missing slugs."
        },
        {
          "path": "frontend/src/components/valentine/EditPanel.tsx",
          "operation": "modify",
          "description": "Add a minimal 'Publish Version 9' control area that collects the production slug, uses validateProductionSlug() to gate publishing, and renders the required English error message when missing/invalid; ensure the publish action is blocked until valid. Use existing shadcn-ui-based UI primitives already used in this file (Button/Input/Label/Sheet/ScrollArea) to keep styling consistent. Verify the component's usage instructions before implementing."
        }
      ]
    }
  ]
}